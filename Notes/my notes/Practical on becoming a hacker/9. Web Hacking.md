# Fundamentals of Web Pen-Testing 

## What is Web Application 

- *Web application* : is a program or software that runs on a web browser to perform specific tasks.
- These web apps are made with programming languages like :
     - *HTML, CSS, JS*(node, react, angular), *Python*(Django, Flask)
- Websites consists 2 parts :
     1. *Front End ( Client Side )* 
         - Is the Front page / the page we access, the graphical part.
         - The frontend is what your users see and includes visual elements like buttons, checkboxes, graphics, and text messages. It allows your users to interact with your application.
         - There are specific languages & frameworks to build front end :
             - Ex.  *HTML*, *CSS*, *JS*(react) 
     2. *Back End ( Server Side )* 
         - The backend is the data and infrastructure that make your application work. It stores and processes application data for your users.
         - The languages used for back end are :
             - Ex.  *JS* (node.js), *Python* (Django, Flask), *PHP*, *SQL* 
- References :
     1. https://www.geeksforgeeks.org/frontend-vs-backend/
     2. https://www.youtube.com/watch?v=n_gODKYn9dM

### HTML - Hyper Text Markup Language
- *HTML* : is a standard markup language for creating Web pages.
     - **Markup language**, standard text-encoding system consisting of a set of symbols inserted in a text document to control its structure, formatting, or the relationship between its parts.
- HTML consists of a series of elements.
- HTML elements tell the browser how to display the content.
- HTML have elements called *Tags*.
     - Tags are special words that have *<>* on their beginning and ending
         - Ex. [[Pasted image 20240602223243.png]] 
- To understand more about HTML see the following references :
     1. [[Pasted image 20240602223423.png]]
     2. https://www.w3schools.com/html/html_intro.asp
     3. https://www.geeksforgeeks.org/html-introduction/
     4. https://www.youtube.com/watch?v=qz0aGYrrlhU

## What is Web hacking

- *Web hacking* refers to exploitation of applications via HTTP which can be done by manipulating the application via its graphical web interface, tampering the Uniform Resource Identifier *(URI)* or tampering *HTTP elements* not contained in the URI.
- References :
     1. https://www.tutorialsfreak.com/ethical-hacking-tutorial/web-application-attacks-and-methodology
     2. https://www.youtube.com/watch?v=1GJ_LwNw6sc
     3. https://tryhackme.com/module/intro-to-web-hacking
     4. https://tryhackme.com/r/resources/blog/free_path
### How do websites work
#### URL and URI 
- *URI* (Universal Resource Identifier) : identifies a resource and differentiates it from others by using a name, location, or both.
- *URI* : a string that identifies a resource.
- URI contains :
     - *scheme*
     - *authority*
     - *path*
     - *query* 
- *URL*(Universal Resource Locater) : identifies the web address or location of a unique resource.
- *URL* : a string that denotes the *location* of a given *resource* on the *internet*.
- URL is part of URI.
- Reference :
     1. https://blog.hubspot.com/website/uri-vs-url
     2. https://www.youtube.com/watch?v=iUzyy8CnPVY - watch it (url parts) 

#### Parts of URL
- A url consists of five parts :
     1. *Scheme* : shows the protocol used, Ex http, ftp, etc. 
     2. *Subdomain* : show which particular page of your website the web browser should serve up. (*www*) 
     3. *Top-level domain* : specifies what type of entity your organization registers as on the internet.
         - *Generic top level domain* : .gov, .org, .NET
         - *Country code top level domain* :  .et, .USA
     4. *Second-level domain* : is the name of your website
     5. *Subdirectory* : helps people understand which particular section of the webpage they are on.

### DNS ( Domain Name System )
- *DNS* turns domain names into IP addresses, which browsers use to load internet pages.
- *DNS query* : is the DNS request that goes out from our computer.
- There are four servers that work together to deliver an IP address to client :
     1. *Recursive resolver*
     2. *Root nameserver*
     3. *TLD nameservers*
     4. *Authoritative nameservers* 
  - Reference :
    1. https://www.bluehost.com/blog/what-is-dns-domain-name-system/?utm_campaign=dsa_blog_PPC&utm_source=googleads&utm_medium=genericsearch&utm_affiliate=bluehost_PPC&irpid=101&clickid=P61C101S570N0B5578A2D4499E0000V104&channelid=P61C101S570N0B5578A2D4499E0000V104&gad_source=1&gclid=EAIaIQobChMIzbWBz9PMhgMV_wkGAB1VNwTHEAAYASAAEgLCkPD_BwE&gclsrc=aw.ds
     2. https://www.internetsociety.org/resources/doc/2023/fact-sheet-encrypted-dns/?gad_source=1&gclid=EAIaIQobChMIzbWBz9PMhgMV_wkGAB1VNwTHEAAYAiAAEgITJvD_BwE
     3. https://www.geeksforgeeks.org/working-of-domain-name-system-dns-server/
#### DNS Records (zone files)
- *DNS records* (aka zone files) are instructions that live in authoritative DNS servers and provide information about a domain including what IP address is associated with that domain and how to handle requests for that domain.
- *DNS records* are aliases for short pieces of text stored in a DNS database, and each one maps a specific domain to an IP address or another piece of data.
- References :
     1. https://gcore.com/learning/dns-records-explained/
- To access DNS record on Linux we can use the following tools :
     1. *nslookup*
     2. *dig*
     3. *host* 
#### Types of DNS records
1. *A record ( address )* 
     - this holds IPv4 addresses.
2. *AAAA record ( quad address )*
     - this holds IPv6 addresses.
3. *MX record ( Mail Exchange )*
     - this tells where mail servers are.
4. *NS record ( name server )*
     - returns the DNS server / name server of the domain.
     - this is where all the DNS records are stored.

## How do websites work?

- A user requests a website by entering the URL or clicking a link. A server processes the request and retrieves the necessary files and data. The server sends the data back to the user's browser.
- *HTTP request* : are requests which the browser sends to the server.
- *HTTP response* : are response from the server to the browser.
- The request and response are sent and received with a Header. See this picture for better understanding [[Pasted image 20240608224542.png]] 

### HTTP Headers
- An HTTP header is a field of an HTTP request or response that passes additional context and metadata about the request or response.
- All headers are 
     - case-insensitive
     - header fields are separated by colon
     - key-value pairs in clear text string format
- References :
     1. https://developer.mozilla.org/en-US/docs/Glossary/HTTP_header
     2. https://www.seobility.net/en/wiki/HTTP_headers
     3. https://medium.com/@amirm.lavasani/http-headers-a-quick-guide-e5d057905cdd
     4. https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers

#### Types of Headers
1. *General Header* : This type of headers applied on Request and Response headers both but with out affecting the database body. 
     - are header or words found both on request and response headers.
2. *Request Header* : Headers containing more information about the resource to be fetched or about the client itself.
3. *Response Header* : Headers with additional information about the response, like its location or about the server itself (name, version, …).
4. *Entity Header* : This type of headers contains the *information* about the body of the resources like MIME type, Content-length. 

#### 1. Request Headers
- This is a header sent to the server.
- In request Header there are different kind of headers :
     - Ex. *GET*, *Host*, *Cookie* .......
- See this pic to see detailed of the header [[Pasted image 20240608231504.png]]
##### Note
Http :
     - is *stateless* which means it doesn't record the request or response.
so cookie was created to solve this problem, it is like an ID.
#### 2. Response Header
- This is the response from the server to the browser.
- See this pic to see detailed of the header  [[Pasted image 20240608231926.png]] 

#### Http request methods
- HTTP defines a set of **request methods** to indicate the desired action to be performed for a given resource.
- The most common types of request methods are *GET* and *POST* but there are others.
- See the pic :  [[Pasted image 20240608232515.png]] 
- References :
     1. https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods
     2. https://www.geeksforgeeks.org/different-kinds-of-http-requests/
     3. https://www.w3schools.com/tags/ref_httpmethods.asp
#### Http Status code
- *HTTP status code* is a message a website 's server sends to the browser to indicate whether or not that request can be fulfilled.
- is a *3-digit* integer where the *first digit* of the Status-code defines the class of the response and the last two digits do not have any categorized role.
- There are 5 values for the first digit :
     - 1xx : *Informational*
         - means request is received and the process is continuing.
     - 2xx : *Success*
         - means action was successfully received, understood and accepted.
     - 3xx : *Redirection* 
         - means further action must be taken to complete the request.
     - 4xx : *Client error* 
         - means request contains incorrect syntax or can't be fulfilled.
     - 5xx : *Server error* 
         - means server failed to fulfill a valid request.
- See the pic for examples :   [[Pasted image 20240608234929.png]]
- Reference :
     1. https://www.woorank.com/en/edu/seo-guides/what-http-status-codes-mean-in-seo
     2. https://blog.postman.com/what-are-http-status-codes/

## Where do we see the Headers ?

- We can see the header using the following :
     1. *Development tool* : It on the browser 
     2. *Curl* :  on kali
     3. *Burp suite* :  on kali

### 1. Development tool
- To open use :
     - *ctr + shift + c*    or  *right click and click Inspect*
 - Then go to Network and click on one response.
 - Use *Firefox* or *Explorer* because they show the request and response unlike *Chrome*.
### 2. Curl on Linux
- It stands for *client URL* is a command line tool.
- It supports several different protocols and runs on almost every platform. This makes it ideal for testing websites.
- Syntax :
     -  *curl   option   url* 
- Example :
     1. To get web content of a site
         -  *curl  https://www.google.com*
     2. To change request method
         - *curl  -X  GET  https://www.google.com*   or
         - *curl  -X  POST  https://www.google.com*
     3. To see response headers
         - *curl  -I  https://www.google.com*
### 3. Burp Suite
- *Burp Suite* is an integrated platform and graphical tool for performing security testing of web applications, it supports the entire testing process, from initial mapping and analysis of an application's attack surface, through to finding and exploiting security vulnerabilities.
- Developed by the company named *Portswigger*.
- It aims to be an all in one set of tools and its capabilities can be enhanced by installing add-ons that are called *BApps*.
- References :
     1. https://www.geeksforgeeks.org/what-is-burp-suite/
     2. https://securitycipher.medium.com/1-introduction-to-burp-suite-guide-for-burp-suite-4054b64f10a0
     3. https://portswigger.net/burp/documentation/desktop/getting-started

## Web Enumeration

- *Web enumeration* is a techniques hackers use when targeting web servers and web sites. When attempting to hack an application with a vulnerability, you first have to find out what files, subdomains or directories the applications are vulnerable to.
- Things we gather are :
     - *Development framework*
     - *Directories*
     - *Sensitive files*
     - *VHOST*
     - *Subdomains* 
- On web enumeration there is a term called *Fuzzing*.
- *Fuzzing* is a technique used to test the security of a web application.
     - is sending random requests to a server and determining a bug based on what the server responds.
     - *dirb* a tool used to do fuzzing
         - Ex.  *dirb*  http://ghoul.htb   
- References for web enumeration :
     1. https://www.udemy.com/course/ethical-hacking-web-enumeration/?couponCode=OF52424
     2. https://medium.com/stolabs/web-application-enumeration-c23090dd66e7

##### NOTE
- *Fuzzing* is a quality assurance technique used to detect coding errors and security vulnerabilities in software, operating systems, or networks. It works by attempting to crash a system or trigger errors by supplying a large volume of random inputs.
- References :
     1. https://www.imperva.com/learn/application-security/fuzzing-fuzz-testing/
     2. https://www.synopsys.com/glossary/what-is-fuzz-testing.html
     3. https://owasp.org/www-community/Fuzzing

### 1. OWASP Top 10
- OWASP stands for *Open Web Application Security Project*.
- *The OWASP Top 10* is a regularly-updated report outlining security concerns for web application security, focusing on the 10 most critical risks. The report is put together by a team of security experts from all over the world.
- This Project releases Top 10 risky vuln every *4 years*.
- Detail :  http://owasp.org/Top10/
- References :
     1. https://www.cloudflare.com/learning/security/threats/owasp-top-10/
     2. https://www.synopsys.com/glossary/what-is-owasp-top-10.html

#### 1. Brute-Force and Dictionary Attack
- *Dictionary attacks* use a preset *list of words* to systematically try and crack account passwords. 
- *Brute force hacks* do not use a list and instead, run through every random combination of letters, symbols, and numbers that might be used to create a password.
- Reference :
     1. https://www.fortinet.com/resources/cyberglossary/brute-force-attack
     2. https://swimlane.com/blog/what-is-a-dictionary-attack/
- There are some tools used to crack passwords or hashes :
     1. *hashcat*   -  kali tool
     2. *john the ripper*   - kali tool
     3. *aircrack-ng* 
     4. etc.
- To learn about these tools check out these videos :
     1. https://www.youtube.com/watch?v=5fy6Lq1vgZk&pp=ygUHSGFzaGNhdA%3D%3D 
     2. https://www.youtube.com/watch?v=XjVYl1Ts6XI&pp=ygUQam9obiB0aGUgcmlwcGVyIA%3D%3D  
#### 2. XSS
- Cross-site scripting (XSS) is an exploit where the attacker attaches code onto a legitimate website that will execute when the victim loads the website. That malicious code can be inserted in several ways.
- References :
     1. https://www.cloudflare.com/learning/security/threats/cross-site-scripting/
     2. https://owasp.org/www-community/attacks/xss/
     3. https://www.youtube.com/watch?v=43yYsui3xZc
##### Note
- On XSS the attacker can access your :
     1. *authentication token* or *Session ID*   -  both are same as Cookie.
- This pic shows the correct way of writing an *XSS script* when you have parameter and if not you can write it.    [[Pasted image 20240609143650.png]]
#### 3. SQL Injection
- SQL injection (SQLi) is a web security vulnerability that allows an attacker to interfere with the queries that an application makes to its database. This can allow an attacker to view data that they are not normally able to retrieve.
- Reference :
     1. https://portswigger.net/web-security/sql-injection
     2. https://www.w3schools.com/sql/sql_injection.asp
     3. https://www.geeksforgeeks.org/sql-injection/
     4. https://www.youtube.com/watch?v=QzP-B69LC5o
- For SQL injection we use a tool called *SQLMap* which is a Kali tool. So try to check it.
     1. https://www.youtube.com/watch?v=nVj8MUKkzQk
#### 4. Rate Limit - limiting problem
- Rate limiting is a technique to limit network traffic to prevent users from exhausting system resources. Rate limiting makes it harder for malicious actors to overburden the system and cause attacks like Denial of Service (DoS).
- References :
     1. https://www.imperva.com/learn/application-security/rate-limiting/
     2. https://www.cloudflare.com/learning/bots/what-is-rate-limiting/
     3. https://www.radware.com/cyberpedia/bot-management/rate-limiting/
#### 5. Access Control
- Access control is a data security process that enables organizations to manage who is authorized to access corporate data and resources. Secure access control uses policies that verify users are who they claim to be and ensures appropriate control access levels are granted to users.
- Reference :
     1. https://www.techtarget.com/searchsecurity/definition/access-control
     2. https://www.geeksforgeeks.org/access-control-in-computer-network/
##### 1. IDOR - Insecure direct object references
- Is a type of access control problem.
- Insecure direct object references (IDOR) is a web application security vulnerability that occurs when an application exposes internal object identifiers, such as database keys or file paths, to users without proper access controls.
- References :
     1. https://www.imperva.com/learn/application-security/insecure-direct-object-reference-idor/
     2. https://portswigger.net/web-security/access-control/idor
     3. https://medium.com/@jetti.dinesh/insecure-direct-object-reference-idor-vulnerabilities-df551431eb7b
     4. https://www.youtube.com/watch?v=Cxt_XU8V3tw
     5. https://www.youtube.com/watch?v=Kh-BlNawnUA
##### 2. Business Logic
- *Business logic* vulnerabilities arise when an attacker manipulates the business rules or processes to their advantage, leading to potential losses or damages.
- Occurs by how the programmer thinks and how the hacker thinks.
- Reference :
     1. https://portswigger.net/web-security/logic-flaws
     2. https://www.imperva.com/learn/application-security/business-logic/
     3. https://www.youtube.com/watch?v=HLS2-kGHupU
     4. https://www.youtube.com/watch?v=Qpf5l-pMMr4

## How to advance on this Field

- check this pic :   [[Pasted image 20240609151648.png]] 
- To learn web attacks use this website  *PortSwigger WebAcademy*
